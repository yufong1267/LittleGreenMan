include HT66F50.inc
ds	.section	'data'
COUNT 		DB		?
COUNT1		DB		?
COUNT2		DB		?
DEL1		DB		?
DEL2		DB		?
DEL3		DB		?
cs	.section	at  000h	'code'
INIT:
	MOV 	A,08H
	MOV 	CP0C,A
	MOV 	CP1C,A
	CLR 	ACERL
	CLR 	PDC
	CLR     PEC
	CLR     PD
	CLR     PE
	SET     PC 
	SET     PCPU
	
	
	MOV     A,00000001B
	MOV     PE,A


CHECK:

work:
	
	MAIN:

	MOV 	A,8
	MOV 	COUNT,A
	MOV 	A,4
	MOV		COUNT1,A
	MOV 	A,30
	MOV		COUNT2,A
	MOV 	A,OFFSET LED
	MOV		TBLP,A
	JMP     LOOP
	

	
	
	
EX:
	MOV 	A,8
	MOV 	COUNT,A
	MOV     A,8
	SUBM     A,TBLP
	

LOOP:
	TABRDL	PD
	CALL	DELAY
	CLR		PD
	RL		PE
	INC		TBLP
	SDZ		COUNT
	JMP     LOOP
	SDZ     COUNT2
	JMP 	EX
	MOV 	A,8
	ADDM    A,TBLP
	MOV     A,30
	MOV     COUNT2,A
	SDZ     COUNT1
	JMP     EX
	JMP		MAIN
	
	
	SZ BUT.0
	JMP work
	CALL DELAY
	SNZ BUT.0
	CALL DELAY
	
	
work2:
	
	MAIN:

	MOV 	A,8
	MOV 	COUNT,A
	MOV 	A,4
	MOV		COUNT1,A
	MOV 	A,100
	MOV		COUNT2,A
	MOV 	A,OFFSET LED
	MOV		TBLP,A
	JMP     LOOP
	

	
	
	
EX1:
	MOV 	A,8
	MOV 	COUNT,A
	MOV     A,8
	SUBM     A,TBLP
	

LOOP1:
	TABRDL	PD
	CALL	DELAY
	CLR		PD
	RL		PE
	INC		TBLP
	SDZ		COUNT
	JMP     LOO1P
	SDZ     COUNT2
	JMP 	EX1
	MOV 	A,8
	ADDM    A,TBLP
	MOV     A,100
	MOV     COUNT2,A
	SDZ     COUNT1
	JMP     EX
	JMP		MAIN
	
	
	SZ BUT.0
	JMP work2
	CALL DELAY
	SNZ BUT.0
	CALL DELAY
	JMP  CHECK
	
	

	      	
ORG LASTPAGE
LED:
			DC	00011000B
			DC	00111100B
			DC	00011000B
			DC	00111100B
			DC	01011010B
			DC	00011000B
			DC	00100100B
			DC	00100100B
			DC	00000110B
			DC	00000110B
			DC	00011100B
			DC	00101110B
			DC	01001001B
			DC	00011100B
			DC	00100010B
			DC	01000010B
			DC	00000110B
			DC	00000110B
			DC	00011100B
			DC	00101100B
			DC	01001010B
			DC	00011101B
			DC	00010010B
			DC	00100100B
			DC	00000110B
			DC	00000110B
			DC	00011100B
			DC	00101110B
			DC	00101001B
			DC	00011100B
			DC	00100100B
			DC	01001000B
		
DELAY	PROC
		MOV		A,1
		MOV		DEL1,A
DEL_1:
		MOV 	A,10
		MOV 	DEL2,A
DEL_2:
		MOV 	A,30
		MOV 	DEL3,A
DEL_3:
		SDZ		DEL3
		JMP		DEL_3
		SDZ		DEL2
		JMP		DEL_2
		SDZ		DEL1
		JMP		DEL_1
		RET
DELAY		ENDP
